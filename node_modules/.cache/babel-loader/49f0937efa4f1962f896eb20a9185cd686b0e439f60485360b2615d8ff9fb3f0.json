{"ast":null,"code":"import React,{useMemo}from\"react\";import{clamp}from\"../logic/electrical\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TOP_Y=150;const RETURN_Y=240;export default function CircuitView(props){const{circuitType,loadCount,switchClosed,onToggleSwitch,sourceV,hasFlow,elementPowers,branchCurrents,faults}=props;// Visual speed only\nconst speed=useMemo(()=>clamp(0.6+sourceV/18,0.6,2.2),[sourceV]);// Non-parallel loop (simple/series)\nconst loopPath=useMemo(()=>{return[{x:100,y:TOP_Y},// after battery\n{x:140,y:TOP_Y},// to switch\n{x:220,y:TOP_Y},// after switch\n{x:700,y:TOP_Y},// to right side\n{x:700,y:RETURN_Y},// down\n{x:60,y:RETURN_Y},// return\n{x:60,y:TOP_Y},// up to battery\n{x:100,y:TOP_Y}];},[]);// Parallel layout constants (horizontal branches between rails)\nconst PAR=useMemo(()=>({rightMostX:700-35,spacingX:70,yCenter:(TOP_Y+RETURN_Y)/2,loadHalf:25// rotated load half-height (Load rect becomes ~50px tall)\n}),[]);// Parallel branch paths should be FULL loops: battery -> switch -> top rail -> branch -> return -> battery\nconst parallelLoopPaths=useMemo(()=>{const paths=[];for(let i=0;i<loadCount;i++){const x=PAR.rightMostX-i*PAR.spacingX;paths.push([// FEED: battery -> switch\n{x:100,y:TOP_Y},{x:140,y:TOP_Y},{x:220,y:TOP_Y},// Top rail out to the far right (so dots traverse the whole rail)\n{x:700,y:TOP_Y},// Back to this branch, then down through the branch to return\n{x,y:TOP_Y},{x,y:RETURN_Y},// Return back to battery\n{x:60,y:RETURN_Y},{x:60,y:TOP_Y},{x:100,y:TOP_Y}]);}return paths;},[loadCount,PAR]);// Dot count for non-parallel modes\nconst dotCount=useMemo(()=>{if(!hasFlow)return 0;const iApprox=elementPowers.reduce((a,b)=>a+b,0)/Math.max(sourceV,0.1);return clamp(Math.round(iApprox*2),3,28);},[hasFlow,elementPowers,sourceV]);return/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 800 360\",width:\"100%\",height:\"100%\",className:\"circuitSvg\",children:[/*#__PURE__*/_jsx(Battery,{x:70,y:TOP_Y}),/*#__PURE__*/_jsx(\"line\",{x1:100,y1:TOP_Y,x2:140,y2:TOP_Y,className:\"wire\"}),/*#__PURE__*/_jsx(Switch,{x:180,y:TOP_Y,closed:switchClosed,onClick:onToggleSwitch}),circuitType===\"simple\"&&/*#__PURE__*/_jsx(SimpleCircuit,{loadCount:loadCount,powers:elementPowers,faults:faults}),circuitType===\"series\"&&/*#__PURE__*/_jsx(SeriesCircuit,{loadCount:loadCount,powers:elementPowers,faults:faults}),circuitType===\"parallel\"&&/*#__PURE__*/_jsx(ParallelCircuit,{loadCount:loadCount,powers:elementPowers,faults:faults}),/*#__PURE__*/_jsx(\"line\",{x1:\"60\",y1:RETURN_Y,x2:\"700\",y2:RETURN_Y,className:\"wire\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"60\",y1:RETURN_Y,x2:\"60\",y2:TOP_Y,className:\"wire\"}),hasFlow&&switchClosed&&circuitType!==\"parallel\"&&dotCount>0&&/*#__PURE__*/_jsx(ElectronDots,{path:loopPath,count:dotCount,speed:speed}),hasFlow&&switchClosed&&circuitType===\"parallel\"&&/*#__PURE__*/_jsx(ParallelElectronDots,{loopPaths:parallelLoopPaths,branchCurrents:branchCurrents!==null&&branchCurrents!==void 0?branchCurrents:new Array(loadCount).fill(0),speed:speed})]});}/* =======================\r\n   SVG subcomponents\r\n   ======================= */function Battery(_ref){let{x,y}=_ref;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{x1:x,y1:y-24,x2:x,y2:y+24,className:\"wire thick\"}),/*#__PURE__*/_jsx(\"line\",{x1:x+14,y1:y-16,x2:x+14,y2:y+16,className:\"wire\"}),/*#__PURE__*/_jsx(\"text\",{x:x-18,y:y+45,textAnchor:\"end\",className:\"label\",children:\"Battery\"})]});}function Switch(_ref2){let{x,y,closed,onClick}=_ref2;const left=x-30;const right=x+30;return/*#__PURE__*/_jsxs(\"g\",{onClick:onClick,style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"circle\",{cx:left,cy:y,r:4,className:\"node\"}),/*#__PURE__*/_jsx(\"circle\",{cx:right,cy:y,r:4,className:\"node\"}),closed?/*#__PURE__*/_jsx(\"line\",{x1:left,y1:y,x2:right,y2:y,className:\"wire\"}):/*#__PURE__*/_jsx(\"line\",{x1:left,y1:y,x2:right-12,y2:y-14,className:\"wire\"}),/*#__PURE__*/_jsx(\"text\",{x:x,y:y+28,textAnchor:\"middle\",className:\"label\",children:\"Switch\"})]});}function faultBadge(f){switch(f){case\"open\":return\"OPEN\";case\"short\":return\"SHORT\";case\"high\":return\"HIGH\";default:return\"\";}}function Load(_ref3){let{x,y,label,powerW,fault}=_ref3;const glow=clamp(powerW/20,0,1);const badge=faultBadge(fault);return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"rect\",{x:x-25,y:y-15,width:50,height:30,rx:6,ry:6,className:\"load\",style:{opacity:0.35+glow*0.65}}),glow>0.02&&/*#__PURE__*/_jsx(\"rect\",{x:x-25,y:y-15,width:50,height:30,rx:6,ry:6,className:\"loadGlow\",style:{opacity:glow}}),/*#__PURE__*/_jsx(\"text\",{x:x,y:y+5,textAnchor:\"middle\",className:\"loadLabel\",children:label}),badge&&/*#__PURE__*/_jsx(\"text\",{x:x,y:y-20,textAnchor:\"middle\",className:\"faultBadge\",children:badge})]});}/* =======================\r\n   Circuit layouts\r\n   ======================= */function SimpleCircuit(_ref4){let{loadCount,powers,faults}=_ref4;const startX=260;const spacing=90;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{x1:220,y1:TOP_Y,x2:startX-25,y2:TOP_Y,className:\"wire\"}),Array.from({length:loadCount}).map((_,i)=>{var _powers$i,_faults$i;const x=startX+i*spacing;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(Load,{x:x,y:TOP_Y,label:\"Load \".concat(i+1),powerW:(_powers$i=powers[i])!==null&&_powers$i!==void 0?_powers$i:0,fault:(_faults$i=faults[i])!==null&&_faults$i!==void 0?_faults$i:\"normal\"}),i<loadCount-1&&/*#__PURE__*/_jsx(\"line\",{x1:x+25,y1:TOP_Y,x2:x+spacing-25,y2:TOP_Y,className:\"wire\"})]},i);}),/*#__PURE__*/_jsx(\"line\",{x1:startX+(loadCount-0.5)*spacing-20,y1:TOP_Y,x2:700,y2:TOP_Y,className:\"wire\"}),/*#__PURE__*/_jsx(\"line\",{x1:700,y1:TOP_Y,x2:700,y2:RETURN_Y,className:\"wire\"})]});}function SeriesCircuit(_ref5){let{loadCount,powers,faults}=_ref5;const startX=280;const spacing=90;const loadY=TOP_Y;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{x1:220,y1:loadY,x2:startX-25,y2:loadY,className:\"wire\"}),Array.from({length:loadCount}).map((_,i)=>{var _powers$i2,_faults$i2;const x=startX+i*spacing;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(Load,{x:x,y:loadY,label:\"Load \".concat(i+1),powerW:(_powers$i2=powers[i])!==null&&_powers$i2!==void 0?_powers$i2:0,fault:(_faults$i2=faults[i])!==null&&_faults$i2!==void 0?_faults$i2:\"normal\"}),i<loadCount-1&&/*#__PURE__*/_jsx(\"line\",{x1:x+25,y1:loadY,x2:x+spacing-25,y2:loadY,className:\"wire\"})]},i);}),/*#__PURE__*/_jsx(\"line\",{x1:startX+(loadCount-0.5)*spacing-20,y1:loadY,x2:700,y2:loadY,className:\"wire\"}),/*#__PURE__*/_jsx(\"line\",{x1:700,y1:loadY,x2:700,y2:RETURN_Y,className:\"wire\"})]});}function ParallelCircuit(_ref6){let{loadCount,powers,faults}=_ref6;const rightMostX=700-35;const spacingX=70;// Center branches between + rail (TOP_Y) and return rail (RETURN_Y)\nconst yCenter=(TOP_Y+RETURN_Y)/2;// Load is 50x30; when rotated 90°, its vertical height becomes ~50px\nconst loadHalf=25;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{x1:220,y1:TOP_Y,x2:700,y2:TOP_Y,className:\"wire\"}),/*#__PURE__*/_jsx(\"line\",{x1:700,y1:TOP_Y,x2:700,y2:RETURN_Y,className:\"wire\"}),Array.from({length:loadCount}).map((_,i)=>{var _powers$i3,_faults$i3;const x=rightMostX-i*spacingX;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"line\",{x1:x,y1:TOP_Y,x2:x,y2:yCenter-loadHalf,className:\"wire\"}),/*#__PURE__*/_jsx(\"g\",{transform:\"rotate(90 \".concat(x,\" \").concat(yCenter,\")\"),children:/*#__PURE__*/_jsx(Load,{x:x,y:yCenter,label:\"Load \".concat(i+1),powerW:(_powers$i3=powers[i])!==null&&_powers$i3!==void 0?_powers$i3:0,fault:(_faults$i3=faults[i])!==null&&_faults$i3!==void 0?_faults$i3:\"normal\"})}),/*#__PURE__*/_jsx(\"line\",{x1:x,y1:yCenter+loadHalf,x2:x,y2:RETURN_Y,className:\"wire\"})]},i);})]});}/* =======================\r\n   Electron dots\r\n   ======================= */function ElectronDots(_ref7){let{path,count,speed}=_ref7;const d=\"M \".concat(path.map(p=>\"\".concat(p.x,\",\").concat(p.y)).join(\" L \"),\" Z\");const dur=(3.2/speed).toFixed(2);const dots=Array.from({length:count}).map((_,i)=>i);return/*#__PURE__*/_jsx(\"g\",{className:\"dots\",children:dots.map(i=>{const delay=(i/dots.length).toFixed(3);return/*#__PURE__*/_jsx(\"circle\",{r:3,className:\"dot\",children:/*#__PURE__*/_jsx(\"animateMotion\",{dur:\"\".concat(dur,\"s\"),repeatCount:\"indefinite\",keyTimes:\"0;1\",keySplines:\"0.3 0.0 0.7 1.0\",begin:\"\".concat(-delay*parseFloat(dur),\"s\"),path:d})},i);})});}function ParallelElectronDots(_ref8){let{loopPaths,branchCurrents,speed}=_ref8;const maxI=Math.max(...branchCurrents,0.001);return/*#__PURE__*/_jsx(\"g\",{className:\"dots\",children:loopPaths.map((p,idx)=>{var _branchCurrents$idx;const iFrac=clamp(((_branchCurrents$idx=branchCurrents[idx])!==null&&_branchCurrents$idx!==void 0?_branchCurrents$idx:0)/maxI,0.15,1);const count=Math.round(6+iFrac*10);const d=\"M \".concat(p.map(pt=>\"\".concat(pt.x,\",\").concat(pt.y)).join(\" L \"),\" Z\");const dur=(3.2/speed).toFixed(2);const dots=Array.from({length:count}).map((_,i)=>i);return/*#__PURE__*/_jsx(\"g\",{children:dots.map(i=>{const delay=(i/dots.length).toFixed(3);return/*#__PURE__*/_jsx(\"circle\",{r:3,className:\"dot\",children:/*#__PURE__*/_jsx(\"animateMotion\",{dur:\"\".concat(dur,\"s\"),repeatCount:\"indefinite\",keyTimes:\"0;1\",keySplines:\"0.3 0.0 0.7 1.0\",begin:\"\".concat(-delay*parseFloat(dur),\"s\"),path:d})},i);})},idx);})});}","map":{"version":3,"names":["React","useMemo","clamp","jsx","_jsx","jsxs","_jsxs","TOP_Y","RETURN_Y","CircuitView","props","circuitType","loadCount","switchClosed","onToggleSwitch","sourceV","hasFlow","elementPowers","branchCurrents","faults","speed","loopPath","x","y","PAR","rightMostX","spacingX","yCenter","loadHalf","parallelLoopPaths","paths","i","push","dotCount","iApprox","reduce","a","b","Math","max","round","viewBox","width","height","className","children","Battery","x1","y1","x2","y2","Switch","closed","onClick","SimpleCircuit","powers","SeriesCircuit","ParallelCircuit","ElectronDots","path","count","ParallelElectronDots","loopPaths","Array","fill","_ref","textAnchor","_ref2","left","right","style","cursor","cx","cy","r","faultBadge","f","Load","_ref3","label","powerW","fault","glow","badge","rx","ry","opacity","_ref4","startX","spacing","from","length","map","_","_powers$i","_faults$i","concat","_ref5","loadY","_powers$i2","_faults$i2","_ref6","_powers$i3","_faults$i3","transform","_ref7","d","p","join","dur","toFixed","dots","delay","repeatCount","keyTimes","keySplines","begin","parseFloat","_ref8","maxI","idx","_branchCurrents$idx","iFrac","pt"],"sources":["C:/Users/Bill Smithingell/Downloads/electrasim/src/components/CircuitView.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\r\nimport type { CircuitType, FaultType } from \"../logic/electrical\";\r\nimport { clamp } from \"../logic/electrical\";\r\n\r\ninterface CircuitViewProps {\r\n  circuitType: CircuitType;\r\n  loadCount: number;\r\n  switchClosed: boolean;\r\n  onToggleSwitch: () => void;\r\n\r\n  sourceV: number;\r\n  hasFlow: boolean;\r\n  elementPowers: number[];\r\n  branchCurrents?: number[];\r\n  faults: FaultType[];\r\n}\r\n\r\ntype Pt = { x: number; y: number };\r\n\r\nconst TOP_Y = 150;\r\nconst RETURN_Y = 240;\r\n\r\nexport default function CircuitView(props: CircuitViewProps) {\r\n  const {\r\n    circuitType,\r\n    loadCount,\r\n    switchClosed,\r\n    onToggleSwitch,\r\n    sourceV,\r\n    hasFlow,\r\n    elementPowers,\r\n    branchCurrents,\r\n    faults,\r\n  } = props;\r\n\r\n  // Visual speed only\r\n  const speed = useMemo(() => clamp(0.6 + sourceV / 18, 0.6, 2.2), [sourceV]);\r\n\r\n  // Non-parallel loop (simple/series)\r\n  const loopPath: Pt[] = useMemo(() => {\r\n    return [\r\n      { x: 100, y: TOP_Y }, // after battery\r\n      { x: 140, y: TOP_Y }, // to switch\r\n      { x: 220, y: TOP_Y }, // after switch\r\n      { x: 700, y: TOP_Y }, // to right side\r\n      { x: 700, y: RETURN_Y }, // down\r\n      { x: 60, y: RETURN_Y }, // return\r\n      { x: 60, y: TOP_Y }, // up to battery\r\n      { x: 100, y: TOP_Y },\r\n    ];\r\n  }, []);\r\n\r\n  // Parallel layout constants (horizontal branches between rails)\r\n  const PAR = useMemo(\r\n    () => ({\r\n      rightMostX: 700 - 35,\r\n      spacingX: 70,\r\n      yCenter: (TOP_Y + RETURN_Y) / 2,\r\n      loadHalf: 25, // rotated load half-height (Load rect becomes ~50px tall)\r\n    }),\r\n    []\r\n  );\r\n\r\n  // Parallel branch paths should be FULL loops: battery -> switch -> top rail -> branch -> return -> battery\r\n  const parallelLoopPaths: Pt[][] = useMemo(() => {\r\n    const paths: Pt[][] = [];\r\n\r\n    for (let i = 0; i < loadCount; i++) {\r\n      const x = PAR.rightMostX - i * PAR.spacingX;\r\n\r\n      paths.push([\r\n        // FEED: battery -> switch\r\n        { x: 100, y: TOP_Y },\r\n        { x: 140, y: TOP_Y },\r\n        { x: 220, y: TOP_Y },\r\n\r\n        // Top rail out to the far right (so dots traverse the whole rail)\r\n        { x: 700, y: TOP_Y },\r\n\r\n        // Back to this branch, then down through the branch to return\r\n        { x, y: TOP_Y },\r\n        { x, y: RETURN_Y },\r\n\r\n        // Return back to battery\r\n        { x: 60, y: RETURN_Y },\r\n        { x: 60, y: TOP_Y },\r\n        { x: 100, y: TOP_Y },\r\n      ]);\r\n    }\r\n\r\n    return paths;\r\n  }, [loadCount, PAR]);\r\n\r\n  // Dot count for non-parallel modes\r\n  const dotCount = useMemo(() => {\r\n    if (!hasFlow) return 0;\r\n\r\n    const iApprox =\r\n      elementPowers.reduce((a, b) => a + b, 0) / Math.max(sourceV, 0.1);\r\n\r\n    return clamp(Math.round(iApprox * 2), 3, 28);\r\n  }, [hasFlow, elementPowers, sourceV]);\r\n\r\n  return (\r\n    <svg\r\n      viewBox=\"0 0 800 360\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      className=\"circuitSvg\"\r\n    >\r\n      {/* Battery + short feed */}\r\n      <Battery x={70} y={TOP_Y} />\r\n      <line x1={100} y1={TOP_Y} x2={140} y2={TOP_Y} className=\"wire\" />\r\n\r\n      {/* Switch */}\r\n      <Switch\r\n        x={180}\r\n        y={TOP_Y}\r\n        closed={switchClosed}\r\n        onClick={onToggleSwitch}\r\n      />\r\n\r\n      {/* Circuit layouts */}\r\n      {circuitType === \"simple\" && (\r\n        <SimpleCircuit\r\n          loadCount={loadCount}\r\n          powers={elementPowers}\r\n          faults={faults}\r\n        />\r\n      )}\r\n\r\n      {circuitType === \"series\" && (\r\n        <SeriesCircuit\r\n          loadCount={loadCount}\r\n          powers={elementPowers}\r\n          faults={faults}\r\n        />\r\n      )}\r\n\r\n      {circuitType === \"parallel\" && (\r\n        <ParallelCircuit\r\n          loadCount={loadCount}\r\n          powers={elementPowers}\r\n          faults={faults}\r\n        />\r\n      )}\r\n\r\n      {/* Return path (common) */}\r\n      <line x1=\"60\" y1={RETURN_Y} x2=\"700\" y2={RETURN_Y} className=\"wire\" />\r\n      <line x1=\"60\" y1={RETURN_Y} x2=\"60\" y2={TOP_Y} className=\"wire\" />\r\n\r\n      {/* Electron dots */}\r\n      {hasFlow &&\r\n        switchClosed &&\r\n        circuitType !== \"parallel\" &&\r\n        dotCount > 0 && (\r\n          <ElectronDots path={loopPath} count={dotCount} speed={speed} />\r\n        )}\r\n\r\n      {hasFlow && switchClosed && circuitType === \"parallel\" && (\r\n        <ParallelElectronDots\r\n          loopPaths={parallelLoopPaths}\r\n          branchCurrents={branchCurrents ?? new Array(loadCount).fill(0)}\r\n          speed={speed}\r\n        />\r\n      )}\r\n    </svg>\r\n  );\r\n}\r\n\r\n/* =======================\r\n   SVG subcomponents\r\n   ======================= */\r\n\r\nfunction Battery({ x, y }: { x: number; y: number }) {\r\n  return (\r\n    <g>\r\n      <line x1={x} y1={y - 24} x2={x} y2={y + 24} className=\"wire thick\" />\r\n      <line x1={x + 14} y1={y - 16} x2={x + 14} y2={y + 16} className=\"wire\" />\r\n      <text x={x - 18} y={y + 45} textAnchor=\"end\" className=\"label\">\r\n        Battery\r\n      </text>\r\n    </g>\r\n  );\r\n}\r\n\r\nfunction Switch({\r\n  x,\r\n  y,\r\n  closed,\r\n  onClick,\r\n}: {\r\n  x: number;\r\n  y: number;\r\n  closed: boolean;\r\n  onClick: () => void;\r\n}) {\r\n  const left = x - 30;\r\n  const right = x + 30;\r\n\r\n  return (\r\n    <g onClick={onClick} style={{ cursor: \"pointer\" }}>\r\n      {/* fixed terminals */}\r\n      <circle cx={left} cy={y} r={4} className=\"node\" />\r\n      <circle cx={right} cy={y} r={4} className=\"node\" />\r\n\r\n      {/* contact arm */}\r\n      {closed ? (\r\n        <line x1={left} y1={y} x2={right} y2={y} className=\"wire\" />\r\n      ) : (\r\n        <line x1={left} y1={y} x2={right - 12} y2={y - 14} className=\"wire\" />\r\n      )}\r\n\r\n      <text x={x} y={y + 28} textAnchor=\"middle\" className=\"label\">\r\n        Switch\r\n      </text>\r\n    </g>\r\n  );\r\n}\r\n\r\nfunction faultBadge(f: FaultType) {\r\n  switch (f) {\r\n    case \"open\":\r\n      return \"OPEN\";\r\n    case \"short\":\r\n      return \"SHORT\";\r\n    case \"high\":\r\n      return \"HIGH\";\r\n    default:\r\n      return \"\";\r\n  }\r\n}\r\n\r\nfunction Load({\r\n  x,\r\n  y,\r\n  label,\r\n  powerW,\r\n  fault,\r\n}: {\r\n  x: number;\r\n  y: number;\r\n  label: string;\r\n  powerW: number;\r\n  fault: FaultType;\r\n}) {\r\n  const glow = clamp(powerW / 20, 0, 1);\r\n  const badge = faultBadge(fault);\r\n\r\n  return (\r\n    <g>\r\n      <rect\r\n        x={x - 25}\r\n        y={y - 15}\r\n        width={50}\r\n        height={30}\r\n        rx={6}\r\n        ry={6}\r\n        className=\"load\"\r\n        style={{ opacity: 0.35 + glow * 0.65 }}\r\n      />\r\n      {glow > 0.02 && (\r\n        <rect\r\n          x={x - 25}\r\n          y={y - 15}\r\n          width={50}\r\n          height={30}\r\n          rx={6}\r\n          ry={6}\r\n          className=\"loadGlow\"\r\n          style={{ opacity: glow }}\r\n        />\r\n      )}\r\n      <text x={x} y={y + 5} textAnchor=\"middle\" className=\"loadLabel\">\r\n        {label}\r\n      </text>\r\n\r\n      {badge && (\r\n        <text x={x} y={y - 20} textAnchor=\"middle\" className=\"faultBadge\">\r\n          {badge}\r\n        </text>\r\n      )}\r\n    </g>\r\n  );\r\n}\r\n\r\n/* =======================\r\n   Circuit layouts\r\n   ======================= */\r\n\r\nfunction SimpleCircuit({\r\n  loadCount,\r\n  powers,\r\n  faults,\r\n}: {\r\n  loadCount: number;\r\n  powers: number[];\r\n  faults: FaultType[];\r\n}) {\r\n  const startX = 260;\r\n  const spacing = 90;\r\n\r\n  return (\r\n    <g>\r\n      <line x1={220} y1={TOP_Y} x2={startX - 25} y2={TOP_Y} className=\"wire\" />\r\n      {Array.from({ length: loadCount }).map((_, i) => {\r\n        const x = startX + i * spacing;\r\n        return (\r\n          <g key={i}>\r\n            <Load\r\n              x={x}\r\n              y={TOP_Y}\r\n              label={`Load ${i + 1}`}\r\n              powerW={powers[i] ?? 0}\r\n              fault={faults[i] ?? \"normal\"}\r\n            />\r\n            {/* wire between loads */}\r\n            {i < loadCount - 1 && (\r\n              <line\r\n                x1={x + 25}\r\n                y1={TOP_Y}\r\n                x2={x + spacing - 25}\r\n                y2={TOP_Y}\r\n                className=\"wire\"\r\n              />\r\n            )}\r\n          </g>\r\n        );\r\n      })}\r\n      <line\r\n        x1={startX + (loadCount - 0.5) * spacing - 20}\r\n        y1={TOP_Y}\r\n        x2={700}\r\n        y2={TOP_Y}\r\n        className=\"wire\"\r\n      />\r\n      <line x1={700} y1={TOP_Y} x2={700} y2={RETURN_Y} className=\"wire\" />\r\n    </g>\r\n  );\r\n}\r\n\r\nfunction SeriesCircuit({\r\n  loadCount,\r\n  powers,\r\n  faults,\r\n}: {\r\n  loadCount: number;\r\n  powers: number[];\r\n  faults: FaultType[];\r\n}) {\r\n  const startX = 280;\r\n  const spacing = 90;\r\n\r\n  const loadY = TOP_Y;\r\n  return (\r\n    <g>\r\n      <line x1={220} y1={loadY} x2={startX - 25} y2={loadY} className=\"wire\" />\r\n\r\n      {Array.from({ length: loadCount }).map((_, i) => {\r\n        const x = startX + i * spacing;\r\n        return (\r\n          <g key={i}>\r\n            <Load\r\n              x={x}\r\n              y={loadY}\r\n              label={`Load ${i + 1}`}\r\n              powerW={powers[i] ?? 0}\r\n              fault={faults[i] ?? \"normal\"}\r\n            />\r\n            {i < loadCount - 1 && (\r\n              <line\r\n                x1={x + 25}\r\n                y1={loadY}\r\n                x2={x + spacing - 25}\r\n                y2={loadY}\r\n                className=\"wire\"\r\n              />\r\n            )}\r\n          </g>\r\n        );\r\n      })}\r\n\r\n      {/* series exit to right side */}\r\n      <line\r\n        x1={startX + (loadCount - 0.5) * spacing - 20}\r\n        y1={loadY}\r\n        x2={700}\r\n        y2={loadY}\r\n        className=\"wire\"\r\n      />\r\n      <line x1={700} y1={loadY} x2={700} y2={RETURN_Y} className=\"wire\" />\r\n    </g>\r\n  );\r\n}\r\n\r\nfunction ParallelCircuit({\r\n  loadCount,\r\n  powers,\r\n  faults,\r\n}: {\r\n  loadCount: number;\r\n  powers: number[];\r\n  faults: FaultType[];\r\n}) {\r\n  const rightMostX = 700 - 35;\r\n  const spacingX = 70;\r\n\r\n  // Center branches between + rail (TOP_Y) and return rail (RETURN_Y)\r\n  const yCenter = (TOP_Y + RETURN_Y) / 2;\r\n\r\n  // Load is 50x30; when rotated 90°, its vertical height becomes ~50px\r\n  const loadHalf = 25;\r\n\r\n  return (\r\n    <g>\r\n      {/* Top rail */}\r\n      <line x1={220} y1={TOP_Y} x2={700} y2={TOP_Y} className=\"wire\" />\r\n\r\n      {/* Right side drop to return */}\r\n      <line x1={700} y1={TOP_Y} x2={700} y2={RETURN_Y} className=\"wire\" />\r\n\r\n      {/* Branches (inserted right-to-left) */}\r\n      {Array.from({ length: loadCount }).map((_, i) => {\r\n        const x = rightMostX - i * spacingX;\r\n\r\n        return (\r\n          <g key={i}>\r\n            {/* Branch wire down to load */}\r\n            <line\r\n              x1={x}\r\n              y1={TOP_Y}\r\n              x2={x}\r\n              y2={yCenter - loadHalf}\r\n              className=\"wire\"\r\n            />\r\n\r\n            {/* Load (rotated 90° for parallel) */}\r\n            <g transform={`rotate(90 ${x} ${yCenter})`}>\r\n              <Load\r\n                x={x}\r\n                y={yCenter}\r\n                label={`Load ${i + 1}`}\r\n                powerW={powers[i] ?? 0}\r\n                fault={faults[i] ?? \"normal\"}\r\n              />\r\n            </g>\r\n\r\n            {/* Branch wire from load down to return */}\r\n            <line\r\n              x1={x}\r\n              y1={yCenter + loadHalf}\r\n              x2={x}\r\n              y2={RETURN_Y}\r\n              className=\"wire\"\r\n            />\r\n          </g>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n}\r\n\r\n/* =======================\r\n   Electron dots\r\n   ======================= */\r\n\r\nfunction ElectronDots({\r\n  path,\r\n  count,\r\n  speed,\r\n}: {\r\n  path: Pt[];\r\n  count: number;\r\n  speed: number;\r\n}) {\r\n  const d = `M ${path.map((p) => `${p.x},${p.y}`).join(\" L \")} Z`;\r\n\r\n  const dur = (3.2 / speed).toFixed(2);\r\n  const dots = Array.from({ length: count }).map((_, i) => i);\r\n\r\n  return (\r\n    <g className=\"dots\">\r\n      {dots.map((i) => {\r\n        const delay = (i / dots.length).toFixed(3);\r\n        return (\r\n          <circle key={i} r={3} className=\"dot\">\r\n            <animateMotion\r\n              dur={`${dur}s`}\r\n              repeatCount=\"indefinite\"\r\n              keyTimes=\"0;1\"\r\n              keySplines=\"0.3 0.0 0.7 1.0\"\r\n              begin={`${-delay * parseFloat(dur)}s`}\r\n              path={d}\r\n            />\r\n          </circle>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n}\r\n\r\nfunction ParallelElectronDots({\r\n  loopPaths,\r\n  branchCurrents,\r\n  speed,\r\n}: {\r\n  loopPaths: Pt[][];\r\n  branchCurrents: number[];\r\n  speed: number;\r\n}) {\r\n  const maxI = Math.max(...branchCurrents, 0.001);\r\n\r\n  return (\r\n    <g className=\"dots\">\r\n      {loopPaths.map((p, idx) => {\r\n        const iFrac = clamp((branchCurrents[idx] ?? 0) / maxI, 0.15, 1);\r\n        const count = Math.round(6 + iFrac * 10);\r\n\r\n        const d = `M ${p.map((pt) => `${pt.x},${pt.y}`).join(\" L \")} Z`;\r\n\r\n        const dur = (3.2 / speed).toFixed(2);\r\n        const dots = Array.from({ length: count }).map((_, i) => i);\r\n\r\n        return (\r\n          <g key={idx}>\r\n            {dots.map((i) => {\r\n              const delay = (i / dots.length).toFixed(3);\r\n              return (\r\n                <circle key={i} r={3} className=\"dot\">\r\n                  <animateMotion\r\n                    dur={`${dur}s`}\r\n                    repeatCount=\"indefinite\"\r\n                    keyTimes=\"0;1\"\r\n                    keySplines=\"0.3 0.0 0.7 1.0\"\r\n                    begin={`${-delay * parseFloat(dur)}s`}\r\n                    path={d}\r\n                  />\r\n                </circle>\r\n              );\r\n            })}\r\n          </g>\r\n        );\r\n      })}\r\n    </g>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}